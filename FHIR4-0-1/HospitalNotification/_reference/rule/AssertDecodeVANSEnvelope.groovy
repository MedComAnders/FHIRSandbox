/*
 rule.summary=Test for basis Base64 decoding
 rule.description= test if base64 decoding is posible
*/



def text = '''<?xml version="1.0" encoding="UTF-8"?>
<VANSEnvelope xmlns="urn:oio:medcom:vans-envelope:1.0.4">
  <SenderID EndPointType="EAN">5790001659592</SenderID>
  <ReceiverID EndPointType="EAN">5790000121526</ReceiverID>
  <EnvelopeIdentifier>068dadff-12bb-406d-8c86-083974dc0180</EnvelopeIdentifier>
  <SentDateTime>2020-08-26T17:12:13</SentDateTime>
  <Message>
    <MetaInformation>
      <Identifier>068dadff-12bb-406d-8c86-083974dc0180</Identifier>
      <Document>
        <Format>XML</Format>
        <Name>MCM:XDIS22</Name>
        <Version>XD2230L</Version>
        <SizeInBytes>6089</SizeInBytes>
      </Document>
      <Transport>
        <Type>reliable</Type>
        <TransformMessage>false</TransformMessage>
        <ServiceTag name="MCM:STATISTIC">manual</ServiceTag>
      </Transport>
    </MetaInformation>
    <Data>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPEVtZXNzYWdlIHhtbG5zPSJodHRwOi8vcmVwLm9pby5kay9tZWRjb20uZGsveG1sL3NjaGVtYXMvMjAxOS8wMy8zMS8iPgogIDxFbnZlbG9wZT4KICAgIDxTZW50PgogICAgICA8RGF0ZT4yMDIwLTA4LTI2PC9EYXRlPgogICAgICA8VGltZT4xNzoxMjwvVGltZT4KICAgIDwvU2VudD4KICAgIDxJZGVudGlmaWVyPlhCZjBTTTRUeEZvdlFGPC9JZGVudGlmaWVyPgogICAgPEFja25vd2xlZGdlbWVudENvZGU+cGx1c3Bvc2l0aXZrdml0dDwvQWNrbm93bGVkZ2VtZW50Q29kZT4KICA8L0VudmVsb3BlPgogIDxFbWVyZ2VuY3lNdW5pY2lwYWxpdHlMZXR0ZXI+CiAgICA8TGV0dGVyPgogICAgICA8SWRlbnRpZmllcj5YQmYwU000VHhGb3ZRRjwvSWRlbnRpZmllcj4KICAgICAgPFZlcnNpb25Db2RlPlhEMjIzMEw8L1ZlcnNpb25Db2RlPgogICAgICA8U3RhdGlzdGljYWxDb2RlPlhESVMyMjwvU3RhdGlzdGljYWxDb2RlPgogICAgICA8QXV0aG9yaXNhdGlvbj4KICAgICAgICA8RGF0ZT4yMDIwLTA4LTI2PC9EYXRlPgogICAgICAgIDxUaW1lPjE3OjEyPC9UaW1lPgogICAgICA8L0F1dGhvcmlzYXRpb24+CiAgICAgIDxUeXBlQ29kZT5YRElTMjI8L1R5cGVDb2RlPgogICAgICA8U3RhdHVzQ29kZT5ueXRicmV2PC9TdGF0dXNDb2RlPgogICAgICA8RXBpc29kZU9mQ2FyZUlkZW50aWZpZXI+MzlkYWRhY2M4NzYxNGQwZTk2ZjBmMjAyYjI0YTc5YzA8L0VwaXNvZGVPZkNhcmVJZGVudGlmaWVyPgogICAgPC9MZXR0ZXI+CiAgICA8U2VuZGVyPgogICAgICA8RUFOSWRlbnRpZmllcj41NzkwMDAxNjU5NTkyPC9FQU5JZGVudGlmaWVyPgogICAgICA8SWRlbnRpZmllcj40NjE8L0lkZW50aWZpZXI+CiAgICAgIDxJZGVudGlmaWVyQ29kZT5rb21tdW5lbnVtbWVyPC9JZGVudGlmaWVyQ29kZT4KICAgICAgPE9yZ2FuaXNhdGlvbk5hbWU+T2RlbnNlPC9PcmdhbmlzYXRpb25OYW1lPgogICAgICA8RGVwYXJ0bWVudE5hbWU+U3VuZGhlZG9nZm9yZWJ5Z2dlbHNlPC9EZXBhcnRtZW50TmFtZT4KICAgICAgPFN0cmVldE5hbWU+TcOlZ2ViYWtrZW4gMTA8L1N0cmVldE5hbWU+CiAgICAgIDxEaXN0cmljdE5hbWU+T2RlbnNlPC9EaXN0cmljdE5hbWU+CiAgICAgIDxQb3N0Q29kZUlkZW50aWZpZXI+NTI1MDwvUG9zdENvZGVJZGVudGlmaWVyPgogICAgPC9TZW5kZXI+CiAgICA8UmVjZWl2ZXI+CiAgICAgIDxFQU5JZGVudGlmaWVyPjU3OTAwMDAxMjE1MjY8L0VBTklkZW50aWZpZXI+CiAgICAgIDxJZGVudGlmaWVyPjA3OTc0MTwvSWRlbnRpZmllcj4KICAgICAgPElkZW50aWZpZXJDb2RlPnlkZXJudW1tZXI8L0lkZW50aWZpZXJDb2RlPgogICAgICA8T3JnYW5pc2F0aW9uTmFtZT5sw6ZnZTwvT3JnYW5pc2F0aW9uTmFtZT4KICAgICAgPERlcGFydG1lbnROYW1lPsOGbGRyZWJvcmdlcmU8L0RlcGFydG1lbnROYW1lPgogICAgICA8U3RyZWV0TmFtZT5WYW5kdsOmcmtzdmVqIDk5PC9TdHJlZXROYW1lPgogICAgICA8RGlzdHJpY3ROYW1lPkhpbGxlcsO4ZDwvRGlzdHJpY3ROYW1lPgogICAgICA8UG9zdENvZGVJZGVudGlmaWVyPjM0MDA8L1Bvc3RDb2RlSWRlbnRpZmllcj4KICAgIDwvUmVjZWl2ZXI+CiAgICA8UGF0aWVudD4KICAgICAgPENpdmlsUmVnaXN0cmF0aW9uTnVtYmVyPjMxMDU3MzQ5NjM8L0NpdmlsUmVnaXN0cmF0aW9uTnVtYmVyPgogICAgICA8UGVyc29uU3VybmFtZU5hbWU+S2xpbnQ8L1BlcnNvblN1cm5hbWVOYW1lPgogICAgICA8UGVyc29uR2l2ZW5OYW1lPk1vZ2VuczwvUGVyc29uR2l2ZW5OYW1lPgogICAgICA8U3RyZWV0TmFtZT5WYWxreXJpZWdhZGUgNS4gMyBzYWw8L1N0cmVldE5hbWU+CiAgICAgIDxEaXN0cmljdE5hbWU+S8O4YmVuaGF2bjwvRGlzdHJpY3ROYW1lPgogICAgICA8UG9zdENvZGVJZGVudGlmaWVyPjEyMTQ8L1Bvc3RDb2RlSWRlbnRpZmllcj4KICAgIDwvUGF0aWVudD4KICAgIDxSZWxhdGl2ZT4KICAgICAgPFJlbGF0aW9uQ29kZT5tb3I8L1JlbGF0aW9uQ29kZT4KICAgICAgPFBlcnNvbklkZW50aWZpZXI+MjkxMTgyOTk5NjwvUGVyc29uSWRlbnRpZmllcj4KICAgICAgPFBlcnNvblN1cm5hbWVOYW1lPkJlcmdncmVuPC9QZXJzb25TdXJuYW1lTmFtZT4KICAgICAgPFBlcnNvbkdpdmVuTmFtZT5LaXJzdGVuIFRlc3Q8L1BlcnNvbkdpdmVuTmFtZT4KICAgICAgPFRlbGVwaG9uZVN1YnNjcmliZXI+CiAgICAgICAgPFRlbGVwaG9uZVN1YnNjcmliZXJJZGVudGlmaWVyPjQ0NDQ0NDQ0PC9UZWxlcGhvbmVTdWJzY3JpYmVySWRlbnRpZmllcj4KICAgICAgICA8VGVsZXBob25lU3Vic2NyaWJlckNvZGU+bW9iaWw8L1RlbGVwaG9uZVN1YnNjcmliZXJDb2RlPgogICAgICA8L1RlbGVwaG9uZVN1YnNjcmliZXI+CiAgICA8L1JlbGF0aXZlPgogICAgPFJlbGF0aXZlPgogICAgICA8UmVsYXRpb25Db2RlPmFlZ3RlZmFlbGxlPC9SZWxhdGlvbkNvZGU+CiAgICAgIDxQZXJzb25JZGVudGlmaWVyPjI1MTI0ODk5OTY8L1BlcnNvbklkZW50aWZpZXI+CiAgICAgIDxQZXJzb25TdXJuYW1lTmFtZT5CZXJnZ3JlbjwvUGVyc29uU3VybmFtZU5hbWU+CiAgICAgIDxQZXJzb25HaXZlbk5hbWU+TmFuY3kgQW5uIFRlc3Q8L1BlcnNvbkdpdmVuTmFtZT4KICAgICAgPFRlbGVwaG9uZVN1YnNjcmliZXI+CiAgICAgICAgPFRlbGVwaG9uZVN1YnNjcmliZXJJZGVudGlmaWVyPjMzMzMzMzMzPC9UZWxlcGhvbmVTdWJzY3JpYmVySWRlbnRpZmllcj4KICAgICAgICA8VGVsZXBob25lU3Vic2NyaWJlckNvZGU+YXJiZWpkZTwvVGVsZXBob25lU3Vic2NyaWJlckNvZGU+CiAgICAgIDwvVGVsZXBob25lU3Vic2NyaWJlcj4KICAgICAgPFRlbGVwaG9uZVN1YnNjcmliZXI+CiAgICAgICAgPFRlbGVwaG9uZVN1YnNjcmliZXJJZGVudGlmaWVyPjIyMjIyMjIyPC9UZWxlcGhvbmVTdWJzY3JpYmVySWRlbnRpZmllcj4KICAgICAgICA8VGVsZXBob25lU3Vic2NyaWJlckNvZGU+ZmFzdG5ldDwvVGVsZXBob25lU3Vic2NyaWJlckNvZGU+CiAgICAgIDwvVGVsZXBob25lU3Vic2NyaWJlcj4KICAgIDwvUmVsYXRpdmU+CiAgICA8UmVsYXRpdmU+CiAgICAgIDxSZWxhdGlvbkNvZGU+ZGF0dGVyPC9SZWxhdGlvbkNvZGU+CiAgICAgIDxQZXJzb25JZGVudGlmaWVyPjAyMDE2MDk5OTY8L1BlcnNvbklkZW50aWZpZXI+CiAgICAgIDxQZXJzb25TdXJuYW1lTmFtZT5MYXVyaWRzZW48L1BlcnNvblN1cm5hbWVOYW1lPgogICAgICA8UGVyc29uR2l2ZW5OYW1lPkxvbm5pIFRlc3Q8L1BlcnNvbkdpdmVuTmFtZT4KICAgIDwvUmVsYXRpdmU+CiAgICA8UmVsYXRpdmU+CiAgICAgIDxSZWxhdGlvbkNvZGU+ZmFyPC9SZWxhdGlvbkNvZGU+CiAgICAgIDxQZXJzb25TdXJuYW1lTmFtZT5CZXJnZ3JlbjwvUGVyc29uU3VybmFtZU5hbWU+CiAgICAgIDxQZXJzb25HaXZlbk5hbWU+RWxtZXIgVGVzdDwvUGVyc29uR2l2ZW5OYW1lPgogICAgPC9SZWxhdGl2ZT4KICAgIDxSZWxhdGl2ZT4KICAgICAgPFJlbGF0aW9uQ29kZT5zYW1sZXZlbmRlPC9SZWxhdGlvbkNvZGU+CiAgICAgIDxQZXJzb25TdXJuYW1lTmFtZT5CZXJnZ3JlbjwvUGVyc29uU3VybmFtZU5hbWU+CiAgICAgIDxUZWxlcGhvbmVTdWJzY3JpYmVyPgogICAgICAgIDxUZWxlcGhvbmVTdWJzY3JpYmVySWRlbnRpZmllcj45OTk5OTk5OTwvVGVsZXBob25lU3Vic2NyaWJlcklkZW50aWZpZXI+CiAgICAgICAgPFRlbGVwaG9uZVN1YnNjcmliZXJDb2RlPm1vYmlsPC9UZWxlcGhvbmVTdWJzY3JpYmVyQ29kZT4KICAgICAgPC9UZWxlcGhvbmVTdWJzY3JpYmVyPgogICAgICA8VGVsZXBob25lU3Vic2NyaWJlcj4KICAgICAgICA8VGVsZXBob25lU3Vic2NyaWJlcklkZW50aWZpZXI+ODg4ODg4ODg8L1RlbGVwaG9uZVN1YnNjcmliZXJJZGVudGlmaWVyPgogICAgICAgIDxUZWxlcGhvbmVTdWJzY3JpYmVyQ29kZT5hcmJlamRlPC9UZWxlcGhvbmVTdWJzY3JpYmVyQ29kZT4KICAgICAgPC9UZWxlcGhvbmVTdWJzY3JpYmVyPgogICAgICA8VGVsZXBob25lU3Vic2NyaWJlcj4KICAgICAgICA8VGVsZXBob25lU3Vic2NyaWJlcklkZW50aWZpZXI+Nzc3Nzc3Nzc8L1RlbGVwaG9uZVN1YnNjcmliZXJJZGVudGlmaWVyPgogICAgICAgIDxUZWxlcGhvbmVTdWJzY3JpYmVyQ29kZT5hcmJlamRlPC9UZWxlcGhvbmVTdWJzY3JpYmVyQ29kZT4KICAgICAgPC9UZWxlcGhvbmVTdWJzY3JpYmVyPgogICAgPC9SZWxhdGl2ZT4KICAgIDxSZWZlcnJhbD4KICAgICAgPElkZW50aWZpZXI+U0ozMzMzMTg8L0lkZW50aWZpZXI+CiAgICAgIDxSZWNlaXZlZD4KICAgICAgICA8RGF0ZT4yMDIwLTA4LTI2PC9EYXRlPgogICAgICAgIDxUaW1lPjE3OjExPC9UaW1lPgogICAgICA8L1JlY2VpdmVkPgogICAgICA8UmVmZXI+CiAgICAgICAgPERpYWdub3NlQ29kZT5FODY8L0RpYWdub3NlQ29kZT4KICAgICAgICA8RGlhZ25vc2VUeXBlQ29kZT5TS1NkaWFnbm9zZWtvZGU8L0RpYWdub3NlVHlwZUNvZGU+CiAgICAgICAgPERpYWdub3NlVGV4dD5VZHTDuHJyaW5nIG9nIG5lZHNhdCBla3N0cmFjZWxsdWzDpnJ2b2x1bWVuPC9EaWFnbm9zZVRleHQ+CiAgICAgIDwvUmVmZXI+CiAgICAgIDxSZWZlcnJhbEFkZGl0aW9uYWw+CiAgICAgICAgPERpYWdub3NlQ29kZT5ERTY1OTwvRGlhZ25vc2VDb2RlPgogICAgICAgIDxEaWFnbm9zZVR5cGVDb2RlPlNLU2RpYWdub3Nla29kZTwvRGlhZ25vc2VUeXBlQ29kZT4KICAgICAgICA8RGlhZ25vc2VUZXh0PkZlZG1lIHUuIHNwZWM8L0RpYWdub3NlVGV4dD4KICAgICAgPC9SZWZlcnJhbEFkZGl0aW9uYWw+CiAgICAgIDxSZWZlcnJhbEFkZGl0aW9uYWw+CiAgICAgICAgPERpYWdub3NlQ29kZT5ERTY1ODwvRGlhZ25vc2VDb2RlPgogICAgICAgIDxEaWFnbm9zZVR5cGVDb2RlPlNLU2RpYWdub3Nla29kZTwvRGlhZ25vc2VUeXBlQ29kZT4KICAgICAgICA8RGlhZ25vc2VUZXh0PkFuZGVuIGxva2FsaXNlcmV0IGZlZG1lPC9EaWFnbm9zZVRleHQ+CiAgICAgIDwvUmVmZXJyYWxBZGRpdGlvbmFsPgogICAgICA8UmVmZXJyYWxBZGRpdGlvbmFsPgogICAgICAgIDxEaWFnbm9zZUNvZGU+REU2NTk8L0RpYWdub3NlQ29kZT4KICAgICAgICA8RGlhZ25vc2VUeXBlQ29kZT5TS1NkaWFnbm9zZWtvZGU8L0RpYWdub3NlVHlwZUNvZGU+CiAgICAgICAgPERpYWdub3NlVGV4dD5Mb2thbGlzZXJldCBmZWRtZSBVTlM8L0RpYWdub3NlVGV4dD4KICAgICAgPC9SZWZlcnJhbEFkZGl0aW9uYWw+CiAgICAgIDxSZWZlcnJhbEFkZGl0aW9uYWw+CiAgICAgICAgPERpYWdub3NlQ29kZT5ERTY1OEE8L0RpYWdub3NlQ29kZT4KICAgICAgICA8RGlhZ25vc2VUeXBlQ29kZT5TS1NkaWFnbm9zZWtvZGU8L0RpYWdub3NlVHlwZUNvZGU+CiAgICAgICAgPERpYWdub3NlVGV4dD5BYmRvbWVuIHBlbmRlbnM8L0RpYWdub3NlVGV4dD4KICAgICAgPC9SZWZlcnJhbEFkZGl0aW9uYWw+CiAgICAgIDxSZWZlcnJhbEFkZGl0aW9uYWw+CiAgICAgICAgPERpYWdub3NlQ29kZT5SNjM8L0RpYWdub3NlQ29kZT4KICAgICAgICA8RGlhZ25vc2VUeXBlQ29kZT5TS1NkaWFnbm9zZWtvZGU8L0RpYWdub3NlVHlwZUNvZGU+CiAgICAgICAgPERpYWdub3NlVGV4dD5TeW1wdG9tZXIgb2cgYWJub3JtZSBmdW5kIHZlZHLDuHJlbmRlIGbDuGRlLSBvZyB2w6Zza2VpbmR0YWdlbHNlPC9EaWFnbm9zZVRleHQ+CiAgICAgIDwvUmVmZXJyYWxBZGRpdGlvbmFsPgogICAgPC9SZWZlcnJhbD4KICAgIDxDbGluaWNhbEluZm9ybWF0aW9uPgogICAgICA8U2lnbmVkPgogICAgICAgIDxEYXRlPjIwMjAtMDgtMjY8L0RhdGU+CiAgICAgICAgPFNpZ25lZEJ5PkhlaWRpIEFkbWluIE5vcm1hbjwvU2lnbmVkQnk+CiAgICAgICAgPEpvYlRpdGxlPlZpc2l0YXRvcjwvSm9iVGl0bGU+CiAgICAgIDwvU2lnbmVkPgogICAgICA8VGV4dDAxPkRldHRlIGVyIGVuIHRlc3QgYWYgc3RlcCAzLjEgZm9yIFhESVMyMiBwcm90b2tvbGxlbi4gRGV0dGUgZXIgZXQgIm55dCIgYWZzbHV0bmluZ3Nub3RhdCBzb20gYmVzdmFyZWxzZSB0aWwgZW4gaGVudmlzbmluZy48L1RleHQwMT4KICAgIDwvQ2xpbmljYWxJbmZvcm1hdGlvbj4KICA8L0VtZXJnZW5jeU11bmljaXBhbGl0eUxldHRlcj4KPC9FbWVzc2FnZT4=</Data>
  </Message>
</VANSEnvelope>
'''
//statick xml parsing
def VANSEnvelope = new XmlParser().parseText(text)
def dataInBase64 = VANSEnvelope.Message.Data.text()
byte[] dataBase64Decoded = dataInBase64.decodeBase64()

//parsing af content fra request 
def testtext = response.getXPathValue("Patient/id")
//def indhold = request.getXPathValue("/VANSEnvelope/Message[1]/Data[1]")
//byte[] decodedData = indhold.decodeBase64()





//Udskriv en base64 string
println(new String (dataInBase64))


assert 4 == 5 : "this is the content of the BASE64 element: " + testtext